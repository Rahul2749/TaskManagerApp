<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link rel="stylesheet" href="@Assets["lib/bootstrap/dist/css/bootstrap.min.css"]" />
    <link rel="stylesheet" href="@Assets["app.css"]" />
    <link rel="stylesheet" href="@Assets["TaskManager.styles.css"]" />
    <ImportMap />
    <link rel="icon" type="image/png" href="taskboardpro.ico" />
    <HeadOutlet />

    <style>
        #app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #F4F7FE;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99999;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(67, 24, 255, 0.1);
            border-top-color: #4318FF;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @@keyframes spin {
            to

        {
            transform: rotate(360deg);
        }

        }
    </style>
</head>
<body>
    <div id="app-loading" style="display: none;">
        <div class="spinner"></div>
    </div>

    <Routes />

    <script src="_framework/blazor.web.js" autostart="false"></script>

    <script>
        (function() {
            // Check if this is first load
            const isFirstLoad = !sessionStorage.getItem('blazor-loaded');

            if (isFirstLoad) {
                // Show spinner only on first load
                document.getElementById('app-loading').style.display = 'flex';
            }

            Blazor.start().then(() => {
                if (isFirstLoad) {
                    // Wait for components to load, then hide
                    setTimeout(() => {
                        document.getElementById('app-loading').style.display = 'none';
                        sessionStorage.setItem('blazor-loaded', 'true');
                    }, 1000);
                }
            });
        })();
    </script>
</body>
</html>

@* <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link rel="stylesheet" href="@Assets["lib/bootstrap/dist/css/bootstrap.min.css"]" />
    <link rel="stylesheet" href="@Assets["app.css"]" />
    <link rel="stylesheet" href="@Assets["TaskManager.styles.css"]" />
    <ImportMap />
    <link rel="icon" type="image/png" href="favicon.png" />
    <HeadOutlet/>
</head>
<body>
    <Routes />
    <script src="_framework/blazor.web.js"></script>
</body>
</html> *@