@* Components/Shared/Header.razor *@
@rendermode @(new InteractiveWebAssemblyRenderMode(prerender: false))
@inject NavigationManager Navigation

<header class="content-header">
    <div class="header-wrapper">
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" @onclick="HandleMenuClick" title="Menu">
            <span>☰</span>
        </button>

        <!-- Page Title -->
        <h2 class="page-title">@Title</h2>

        <!-- Header Actions -->
        <div class="header-actions">
            <button class="icon-btn" title="Info" @onclick="HandleInfo">
                <span>ℹ️</span>
            </button>
            <button class="icon-btn" title="Notifications" @onclick="HandleNotifications">
                <span>🔔</span>
                @if (NotificationCount > 0)
                {
                    <span class="notification-badge"></span>
                }
            </button>
            @if (ShowAddButton)
            {
                <button class="btn btn-primary" @onclick="HandleAddTask">
                    <span class="btn-icon">➕</span>
                    <span class="btn-text">@AddButtonText</span>
                </button>
            }
        </div>
    </div>
</header>

<style>
    /* CONTENT HEADER */
    .content-header {
        background: transparent;
        padding: var(--space-lg) var(--space-xl);
        position: relative;
    }

    .header-wrapper {
        display: flex;
        align-items: center;
        gap: var(--space-md);
        width: 100%;
    }

    .page-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
        flex: 1;
        line-height: 1.2;
    }

    .header-actions {
        display: flex;
        align-items: center;
        gap: var(--space-md);
        flex-shrink: 0;
    }

    /* MOBILE MENU BUTTON */
    .mobile-menu-btn {
        display: none;
        width: 40px;
        height: 40px;
        border-radius: var(--radius-sm);
        border: none;
        background: white;
        color: var(--text-primary);
        cursor: pointer;
        font-size: 1.5rem;
        align-items: center;
        justify-content: center;
        box-shadow: var(--shadow-sm);
        transition: all 0.2s;
        flex-shrink: 0;
        line-height: 1;
    }

        .mobile-menu-btn:hover {
            background: var(--bg-sidebar-hover);
            transform: scale(1.05);
        }

        .mobile-menu-btn:active {
            transform: scale(0.95);
        }

    /* RESPONSIVE */
    @@media (max-width: 1024px) {
        .mobile-menu-btn {
            display: flex;
        }

        .content-header {
            padding: var(--space-lg) var(--space-md);
        }

        .page-title {
            font-size: 1.25rem;
        }
    }

    @@media (max-width: 768px) {
        .content-header {
            padding: var(--space-md);
        }

        .header-wrapper {
            gap: var(--space-sm);
        }

        .page-title {
            font-size: 1.125rem;
            margin-right: auto;
        }

        .btn .btn-text {
            display: none;
        }

        .btn .btn-icon {
            margin: 0;
        }

        .btn {
            padding: 10px;
            width: 40px;
            height: 40px;
            justify-content: center;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            font-size: 1.25rem;
        }

        .header-actions {
            gap: var(--space-sm);
        }
    }

    @@media (max-width: 480px) {
        .content-header {
            padding: var(--space-sm);
        }

        .mobile-menu-btn {
            width: 36px;
            height: 36px;
            font-size: 1.375rem;
        }

        .page-title {
            font-size: 1rem;
        }

        .header-actions {
            gap: 8px;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            font-size: 1.125rem;
        }

        .btn {
            width: 36px;
            height: 36px;
            padding: 8px;
        }
    }
</style>

@code {
    [Parameter] public string Title { get; set; } = "Dashboard";
    [Parameter] public int NotificationCount { get; set; } = 0;
    [Parameter] public bool ShowAddButton { get; set; } = true;
    [Parameter] public string AddButtonText { get; set; } = "Add Task";

    [Inject] private IJSRuntime JSRuntime { get; set; } = default!;

    private async void HandleMenuClick()
    {
        // Toggle sidebar using JavaScript
        await JSRuntime.InvokeVoidAsync("toggleMobileSidebar");
    }

    private void HandleAddTask()
    {
        Console.WriteLine("Add Task clicked");
        // Add your task creation logic here
    }

    private void HandleInfo()
    {
        Console.WriteLine("Info clicked");
        // Add your info modal or navigation logic here
    }

    private void HandleNotifications()
    {
        Console.WriteLine("Notifications clicked");
        Navigation.NavigateTo("/notifications");
    }
}